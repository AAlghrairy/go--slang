/**
 * C AST Processor Module.
 */

import { CAstRoot } from "~src/c-ast/core";
import { SymbolTable } from "~src/processor/symbolTable";

import { visit } from "~src/processor/visit";

/**
 * Processes the C AST tree generated by parsing, to add additional needed information for certain nodes.
 * @param ast
 * @param sourceCode
 * @returns
 */
export default function process(sourceCode: string, ast: CAstRoot) {
  ast.symbolTable = new SymbolTable();
  visit(sourceCode, ast, ast.symbolTable);
  return ast;
}
